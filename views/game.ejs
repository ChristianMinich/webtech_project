<html>
  <head>
    <link rel="stylesheet" href="./css/style.css" />
    <title>QuizGame</title>
    <style>
      .answers {
              border: 1px solid #000000;
              margin-bottom: 10px;
              text-align: center;
              cursor: default;
          }
    </style>
  </head>
  <body>
    <h1><%= roomID%></h1>
    <h2><%= username%></h2>
    <img src="<%= avatar%>" width="50px" height="50px">
    <div class="quizbox">

      <h2 id="question-text"></h2>
      <div class = "answers" id="option1-text"></div>
      <div class = "answers" id="option2-text"></div>
      <div class = "answers" id="option3-text"></div>
      <div class = "answers" id="option4-text"></div>
  </div>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    const socket = io();
    const roomId = "<%= roomID %>";
    const username = "<%= username %>";
    
    window.onload = function () {
      socket.emit('gamePageLoaded',roomId, username);
      console.log(username);
    };

    document.getElementById("option1-text").addEventListener("click", function() {
      socket.emit("questionSelected", roomId, username, this.textContent)
    });
    document.getElementById("option2-text").addEventListener("click", function() {
      socket.emit("questionSelected", roomId, username, this.textContent)
    });
    document.getElementById("option3-text").addEventListener("click", function() {
      socket.emit("questionSelected", roomId, username, this.textContent)
    });
    document.getElementById("option4-text").addEventListener("click", function() {
      socket.emit("questionSelected", roomId, username, this.textContent)
    });

    socket.on('question', function(question) {
      console.log("Frage erhlaten");
      document.getElementById('question-text').textContent = question.text;
      document.getElementById('option1-text').textContent = question.answers[0];
      document.getElementById('option2-text').textContent = question.answers[1];
      document.getElementById('option3-text').textContent = question.answers[2];
      document.getElementById('option4-text').textContent = question.answers[3];
    });

    socket.on("test", (roomID) => {

      console.log("Test erfolgreich ! " + roomID);

    });
    
    
  
  </script>
    
  </body>
</html>
